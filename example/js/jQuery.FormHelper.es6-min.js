!function(r,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,r,r.document)}):"object"==typeof exports&&exports?module.exports=e(require("jquery"),r,r.document):e(jQuery,r,r.document)}("undefined"!=typeof window?window:this,function(r,e,t,o){"use strict";let a={};const n={disableSubmitBtn:!0,errorHurdling:!1,DEBUG_MODE:!1},i={},l=(...r)=>{a.DEBUG_MODE&&console.error("ERROR:\n\t"+r.toString()+"\n---")},d=["INPUT","TEXTAREA"],s=["EMAIL","TEL","NUMBER"],p="FormHelper".replace(/^\w/,r=>r.toLowerCase())+"_";let u;i.FormHelper=class{constructor(e,t){u=r(e),a=r.extend({},n,t),this.init()}init(){u.attr("novalidate",""),this.pairingErrorAndFields(),((...r)=>{a.DEBUG_MODE&&console.info("DEBUG:\n\t"+r.toString()+"\n---")})("FormHelper("+u.attr("id")+") initialised"),a.disableSubmitBtn&&u.find('[type="submit"]').prop("disabled",!0),u.submit(r=>(r.preventDefault(),this.resetFormError(r),this.validationLoop(r),!1))}validationLoop(e){let t=r(e.target);return a.DEBUG_MODE&&console.log("Validation Loop: "+t.attr("id")),t.find(d.join(",")).each((e,o)=>{let a=r(o).data(p+"rules"),n=r(o).val();a.forEach(e=>{let a=this.validationDelegator(n,e);if(console.log("Testing["+r(o).attr("name")+": '"+n+"' with rule: '"+e+"'] = "+a),!a){let a=r(o).attr("name");r(o).attr("aria-invalid",!0);let n=t.find('error[errorFor="'+a+'"][data-rule="'+e+'"], .error[errorFor="'+a+'"][data-rule="'+e+'"]');1==n.length?n.addClass("errorShow"):n.length>1?t.find('error[data-rule="'+e+'"], .error[data-rule="'+e+'"]').addClass("errorShow"):l("Error message disappeared! Something wrong happened")}})}),!1}validationDelegator(r,e){let t=e.toLocaleLowerCase().replace(/\s/g,"");return"required"===t?r.trim().length>0:"email"===t?(r=>/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r))(r.trim()):"tel"===t?(r=>/^[\+]?[(]?[0-9]{0,3}[)]?[-\s]?[0-9]{4}[-\s]?[0-9]{4,6}$/.test(r))(r.trim()):t.includes("max:")?r.trim()<=t.split(":")[1]:(l("Rule: "+t+" is not supported"),!0)}pairingErrorAndFields(){u.find(".error, error").each((e,t)=>{let o=this.getTargetInputField(t);if(o){let e=r(o).attr("name")||this.generateUUID_v4();r(t).data("errorFor",e).attr("errorFor",e);let n=r(t).attr("data-rule")?r(t).attr("data-rule").toLowerCase().split(","):[],i=r(o).data(p+"rules")||[],l=[...new Set(i.concat(n))];r(o).data(p+"rules",l),a.DEBUG_MODE&&r(o).attr(p+"rules",l.join(",")),n.includes("required")&&r(o).prop("required",!0),r(o).attr("name")||(r(o).attr("name",e),((...r)=>{a.DEBUG_MODE&&console.warn("WARNING:\n\t"+r.toString()+"\n---")})("Form field missing 'NAME' attribute, generated an UUID instead ["+e+"]"))}}),u.find(d.join(",")).each((e,t)=>{let o=s.includes(r(t).prop("type"))?r(t).prop("type"):"",n=r(t).prop("required")?"required":"",i=r(t).data(p+"rules")||[];""!=o&&i.push(o),""!=n&&i.push(n),i=[...new Set(i)],r(t).data(p+"rules",i),a.DEBUG_MODE&&r(t).attr(p+"rules",i.join(","))})}getTargetInputField(e){let t=r(e).attr("errorFor")!=o,a=d.includes(r(e).prev().prop("tagName")),n=r(e).parent().prop("tagName")=="errorGroup".toUpperCase(),i=n&&r(e).parent().attr("errorFor")!==o,l=n&&d.includes(r(e).parent().prev().prop("tagName"));if(t){let t="[name='"+r(e).attr("errorFor")+"']"||"";return r(t)}if(a)return r(e).prev();if(i){let t="[name='"+r(e).parent().attr("errorFor")+"']";return r(t)}return l?r(e).parent().prev():(console.error("Error message with no paired validation target:\n'"+r(e).text()+"'"),o)}eachField_forDebugging(){r(d.join(",")).each((e,t)=>{let o=r(t).data(p+"rules")||[];a.DEBUG_MODE&&console.log(r(t).attr("name"),o)})}resetFormError(e){let t=r(e.target);t.find(d.join(",")).attr("aria-invalid",!1),t.find("error.errorShow, .error.errorShow").removeClass("errorShow")}generateUUID_v4(){let r=(new Date).getTime(),e=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let o=16*Math.random();return r>0?(o=(r+o)%16|0,r=Math.floor(r/16)):(o=(e+o)%16|0,e=Math.floor(e/16)),("x"===t?o:3&o|8).toString(16)})}},u=o,r.fn.FormHelper=function(e){return this.each(function(){r.data(this,"plugin_FormHelper")||r.data(this,"plugin_FormHelper",new i.FormHelper(this,e))})}});
//# sourceMappingURL=../../maps/js/jQuery.FormHelper.es6-min.js.map
