!function(r,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,r,r.document)}):"object"==typeof exports&&exports?module.exports=e(require("jquery"),r,r.document):e(jQuery,r,r.document)}("undefined"!=typeof window?window:this,function(r,e,t,o){"use strict";let a={};const i={disableSubmitBtn:!0,errorHurdling:!1,DEBUG_MODE:!1},n=(r(e),r(t),{}),l=(...r)=>{a.DEBUG_MODE&&console.error("ERROR:\n\t"+r.toString()+"\n---")},s=["INPUT","TEXTAREA"],d=["EMAIL","TEL"];let p;n.FormHelper=class{constructor(e,t){p=r(e),a=r.extend({},i,t),this.init()}init(){p.attr("novalidate",""),this.pairingErrorAndFields(),((...r)=>{a.DEBUG_MODE&&console.info("DEBUG:\n\t"+r.toString()+"\n---")})("FormHelper initialised",this.el),a.disableSubmitBtn&&p.find('[type="submit"]').prop("disabled",!0),p.submit(r=>(r.preventDefault(),this.resetFormError(),this.validationLoop(),!1))}validationLoop(){return p.find(s.join(",")).each((e,t)=>{let o=r(t).data("formHelper_rules"),a=r(t).val();o.forEach(e=>{let o=this.validationDelegator(a,e);if(console.log("Testing['"+a+"' with rule: '"+e+"'] = "+o),!o){let o=r(t).attr("id");r(t).attr("aria-invalid",!0);let a=r('error[errorFor="'+o+'"], .error[errorFor="'+o+'"]');1==a.length?a.addClass("errorShow"):a.length>1?r('error[data-rule="'+e+'"], .error[data-rule="'+e+'"]').addClass("errorShow"):l("Error message disappeared! Something wrong happened")}})}),!1}validationDelegator(r,e){let t=e.trim().toLocaleLowerCase();return"required"===t?r.trim().length>0:"email"===t?(r=>/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r))(r.trim()):"tel"===t?(r=>/^[\+]?[(]?[0-9]{0,3}[)]?[-\s]?[0-9]{4}[-\s]?[0-9]{4,6}$/.test(r))(r.trim()):(l("Rule: "+t+" is not supported"),!1)}pairingErrorAndFields(){r(".error, error").each((e,t)=>{let o=this.getTargetInputField(t);if(o){let e=r(o).attr("id")||this.generateUUID_v4();r(t).data("errorFor",e).attr("errorFor",e);let i=r(t).attr("data-rule")?r(t).attr("data-rule").toLowerCase().split(","):[],n=r(o).data("formHelper_rules")||[],l=[...new Set(n.concat(i))];r(o).data("formHelper_rules",l),a.DEBUG_MODE&&r(o).attr("formHelper_rules",l.join(",")),i.includes("required")&&r(o).prop("required",!0),r(o).attr("id")||(r(o).attr("id",e),((...r)=>{a.DEBUG_MODE&&console.warn("WARNING:\n\t"+r.toString()+"\n---")})("Form field missing ID attribute, generated an UUID instead ["+e+"]"))}}),p.find(s.join(",")).each((e,t)=>{let o=d.includes(r(t).prop("type"))?r(t).prop("type"):"",i=r(t).prop("required")?"required":"",n=r(t).data("formHelper_rules")||[];""!=o&&n.push(o),""!=i&&n.push(i),n=[...new Set(n)],r(t).data("formHelper_rules",n),a.DEBUG_MODE&&r(t).attr("formHelper_rules",n.join(","))})}getTargetInputField(e){let t=r(e).attr("errorFor")!=o,a=s.includes(r(e).prev().prop("tagName")),i=r(e).parent().prop("tagName")=="errorGroup".toUpperCase(),n=i&&r(e).parent().attr("errorFor")!==o,l=i&&s.includes(r(e).parent().prev().prop("tagName"));if(t){let t="#"+r(e).attr("errorFor");return r(t)}if(a)return r(e).prev();if(n){let t="#"+r(e).parent().attr("errorFor");return r(t)}return l?r(e).parent().prev():(console.error("Error message with no paired validation target:\n'"+r(e).text()+"'"),o)}eachField_forDebugging(){r(s.join(",")).each((e,t)=>{let o=r(t).data("formHelper_rules")||[];a.DEBUG_MODE&&console.log(r(t).attr("id"),o)})}resetFormError(){p.find(s.join(",")).attr("aria-invalid",!1),r("error, .error").removeClass("errorShow")}generateUUID_v4(){let r=(new Date).getTime(),e=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let o=16*Math.random();return r>0?(o=(r+o)%16|0,r=Math.floor(r/16)):(o=(e+o)%16|0,e=Math.floor(e/16)),("x"===t?o:3&o|8).toString(16)})}},r.fn.FormHelper=function(e){return this.each(function(){r.data(this,"plugin_FormHelper")||r.data(this,"plugin_FormHelper",new n.FormHelper(this,e))})}});
//# sourceMappingURL=../../maps/js/jQuery.FormHelper.es6-min.js.map
